kingly log on to http://127.0.0.1/phpmyadmin/index.php?route=/sql&pos=0&db=cbt_app_db&table=new_questions under SQL insert the commands below

-- Create new admins table structure
-- Create the database
CREATE DATABASE IF NOT EXISTS cbt_app_db;
USE cbt_app_db;

-- 1. active_exams
CREATE TABLE IF NOT EXISTS active_exams (
    id INT AUTO_INCREMENT PRIMARY KEY,
    subject VARCHAR(100),
    is_active BOOLEAN,
    exam_date DATETIME
);

-- 2. activities_log
CREATE TABLE IF NOT EXISTS activities_log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    activity TEXT,
    admin_id INT,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at DATETIME
);

-- 3. admins
CREATE TABLE IF NOT EXISTS admins (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(100) UNIQUE,
    password VARCHAR(255),
    created_at DATETIME,
    role VARCHAR(50)
);

-- 12. teachers
CREATE TABLE IF NOT EXISTS teachers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    username VARCHAR(100) UNIQUE,
    email VARCHAR(100),
    password VARCHAR(255),
    phone VARCHAR(20),
    created_at DATETIME,
    role VARCHAR(50)
);

--20. classes
CREATE TABLE IF NOT EXISTS classes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    academic_level_id INT NOT NULL,
    stream_id INT NOT NULL,
    class_name VARCHAR(100),  -- "JSS1 Gold"
    is_active TINYINT(1) DEFAULT 1,
    FOREIGN KEY (academic_level_id) REFERENCES academic_levels(id),
    FOREIGN KEY (stream_id) REFERENCES streams(id),
    UNIQUE (academic_level_id, stream_id)
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 14. tests
CREATE TABLE IF NOT EXISTS tests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    academic_level_id INT NOT NULL,
    subject VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    year VARCHAR(9),
    duration INT,
    created_at DATETIME,
    FOREIGN KEY (academic_level_id) REFERENCES academic_levels(id)
)CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 7. new_questions
CREATE TABLE IF NOT EXISTS new_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_text TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    test_id INT,
    class VARCHAR(20),
    subject VARCHAR(100),
    question_type VARCHAR(50),
    created_at DATETIME,
    FOREIGN KEY (test_id) REFERENCES tests(id) ON DELETE CASCADE
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 4. fill_blank_questions
CREATE TABLE IF NOT EXISTS ill_blank_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT,
    correct_answer TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 5. image_questions
CREATE TABLE IF NOT EXISTS image_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT,
    image_path TEXT,
    description TEXT,
    correct_answer TEXT,
    FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
);

-- 6. multiple_choice_questions
CREATE TABLE IF NOT EXISTS multiple_choice_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT,
    option1 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option2 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option3 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option4 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    correct_answers TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    image_path TEXT,
    FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 8. results
CREATE TABLE IF NOT EXISTS results (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    test_id INT,
    score INT,
    total_questions INT,
    created_at DATETIME,
    status VARCHAR(50),
    reattempt_approved BOOLEAN,
    FOREIGN KEY (test_id) REFERENCES tests(id) ON DELETE CASCADE
);

-- 9. settings
CREATE TABLE IF NOT EXISTS settings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    setting_name VARCHAR(100),
    setting_value TEXT
);

-- 10. single_choice_questions
CREATE TABLE IF NOT EXISTS single_choice_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT,
    option1 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option2 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option3 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    option4 TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    correct_answer TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,
    image_path TEXT,
    FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 11. students
CREATE TABLE IF NOT EXISTS students (
    id INT AUTO_INCREMENT PRIMARY KEY,

    -- Core identity
    full_name VARCHAR(150) NOT NULL,
    reg_no VARCHAR(50) UNIQUE NULL,

    -- Class relationship (string for now, can evolve later)
    class VARCHAR(50) NOT NULL,

    -- Contact / profile (optional, editable later)
    email VARCHAR(100) NULL,
    phone VARCHAR(20) NULL,
    photo VARCHAR(255) NULL,
    address TEXT NULL,
    role VARCHAR(50) NOT NULL DEFAULT 'student',

    -- Status & metadata
    created_via ENUM('exam','class_management') DEFAULT 'exam',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 13. teacher_subjects
CREATE TABLE IF NOT EXISTS teacher_subjects (
    id INT AUTO_INCREMENT PRIMARY KEY,
    teacher_id INT,
    subject VARCHAR(100),
    FOREIGN KEY (teacher_id) REFERENCES teachers(id)
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 15. true_false_questions
CREATE TABLE IF NOT EXISTS true_false_questions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    question_id INT,
    correct_answer BOOLEAN,
    FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
);

-- 15. exam_attempts
CREATE TABLE IF NOT EXISTS exam_attempts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    test_id INT NOT NULL,
    question_id INT NOT NULL,
    answer TEXT, -- JSON or comma-separated for multiple-choice multi
    is_flagged TINYINT(1) DEFAULT 0,
    time_left INT NOT NULL,
    current_index INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY unique_attempt (user_id, test_id, question_id),
    FOREIGN KEY (test_id) REFERENCES tests(id) ON DELETE CASCADE,
    --FOREIGN KEY (question_id) REFERENCES new_questions(id) ON DELETE CASCADE
);

UPDATE settings SET setting_value = '1' WHERE setting_name = 'show_results_immediately';

-- 16. subjects
CREATE TABLE IF NOT EXISTS subjects (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `subject_name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `subject_name` (`subject_name`)
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--20. subject_levels
CREATE TABLE IF NOT EXISTS subject_levels (
    id INT AUTO_INCREMENT PRIMARY KEY,
    subject_id INT NOT NULL,
    class_level ENUM('PRIMARY','JSS','SS') NOT NULL,
    UNIQUE(subject_id, class_level),
    FOREIGN KEY (subject_id) REFERENCES subjects(id) ON DELETE CASCADE
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--17. academic year
CREATE TABLE IF NOT EXISTS academic_years (
  id INT AUTO_INCREMENT PRIMARY KEY,
  year VARCHAR(9) NOT NULL,
  session VARCHAR(50),
  exam_title VARCHAR(50),
  status ENUM('active','inactive') NOT NULL DEFAULT 'inactive',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
)CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 18. super_admins
CREATE TABLE IF NOT EXISTS super_admins (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(100) UNIQUE,
    password VARCHAR(255),
    created_at DATETIME,
    role VARCHAR(50)
);

--19. system_settings
CREATE TABLE IF NOT EXISTS system_settings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    setup_completed TINYINT(1) DEFAULT 0,
    setup_completed_at TIMESTAMP NULL,
    setup_by INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

--19. streams
CREATE TABLE IF NOT EXISTS streams (
    id INT AUTO_INCREMENT PRIMARY KEY,
    stream_name VARCHAR(50) UNIQUE
);

--19. academic_levels
CREATE TABLE IF NOT EXISTS academic_levels (
    id INT AUTO_INCREMENT PRIMARY KEY,
    level_code VARCHAR(10) UNIQUE CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci,   -- JSS1, JSS2, SS1
    class_group ENUM('JSS','SS') NOT NULL
)CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

--19. teacher_classes
CREATE TABLE IF NOT EXISTS teacher_classes (
    teacher_id INT NOT NULL,
    class_id INT NOT NULL,
    PRIMARY KEY (teacher_id, class_id),
    FOREIGN KEY (teacher_id) REFERENCES teachers(id),
    FOREIGN KEY (class_id) REFERENCES classes(id)
);

--19. schools
CREATE TABLE IF NOT EXISTS schools (
    id INT AUTO_INCREMENT PRIMARY KEY,
    school_name VARCHAR(255) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-19. student_subject_scores
CREATE TABLE IF NOT EXISTS student_subject_scores (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    class_id INT NOT NULL,
    subject_id INT NOT NULL,
    academic_year_id INT NOT NULL,  -- THIS IS THE TERM
    ca1 TINYINT UNSIGNED DEFAULT 0,
    ca2 TINYINT UNSIGNED DEFAULT 0,
    ca3 TINYINT UNSIGNED DEFAULT 0,
    ca4 TINYINT UNSIGNED DEFAULT 0,
    exam TINYINT UNSIGNED DEFAULT 0,
    total TINYINT UNSIGNED DEFAULT 0,
    grade CHAR(1) DEFAULT NULL,
    updated_by INT NULL,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE (student_id, subject_id, academic_year_id),
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (class_id) REFERENCES classes(id),
    FOREIGN KEY (subject_id) REFERENCES subjects(id),
    FOREIGN KEY (academic_year_id) REFERENCES academic_years(id)
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;-

--19. student_term_remarks 
CREATE TABLE IF NOT EXISTS student_term_remarks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT NOT NULL,
    academic_year_id INT NOT NULL,
    teacher_id INT NOT NULL,
    remark TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (student_id, academic_year_id),
    FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
    FOREIGN KEY (academic_year_id) REFERENCES academic_years(id),
    FOREIGN KEY (teacher_id) REFERENCES teachers(id)
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--19. grade_scales 
CREATE TABLE IF NOT EXISTS grade_scales (
    id INT AUTO_INCREMENT PRIMARY KEY,
    min_score TINYINT UNSIGNED NOT NULL,
    max_score TINYINT UNSIGNED NOT NULL,
    grade CHAR(1) NOT NULL,
    remark VARCHAR(50),
    UNIQUE (grade)
) CHARACTER SET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
